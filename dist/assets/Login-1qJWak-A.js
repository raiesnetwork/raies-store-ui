import{g as M,a as P,r as t,u as U,d as T,j as e,L as W}from"./index-O9k_qbqq.js";import{U as F,e as O}from"./Transition-Bs2MMU1J.js";/* empty css              */import{F as B,S as G,M as u,T as D,C as H}from"./Login-llI9kXPK.js";import{H as R}from"./Header-DR75LYZ0.js";const{hostname:z}=window.location;let m=M(z);console.log("ss",m);const Q=()=>{var p;const{login:f}=P()||{},[n,j]=t.useState(""),[g,l]=t.useState(!1),[N,a]=t.useState(!1),[v,i]=t.useState(""),[c,b]=t.useState(""),[_,S]=t.useState(!1),[o,y]=t.useState("false"),{verifyNumber:C,loginWithPassword:w,storeData:d}=U(s=>s);let h=T();const E=async s=>{s.preventDefault(),_?I():k()},k=async()=>{var s,x;if(o==="false")return a(!0),i("Select a user type");if(l(!0),a(!1),n.trim()&&c.trim()&&n.length>7){const r=await w(n,c,m,o);if(console.log("response",r),l(!1),r.error)r.subscription===!1&&h("/upgrade-plan",{state:{userId:r.userId,username:r.username}}),a(!0),i(r.message);else{const L={username:(s=r.data)==null?void 0:s.username,api_token:(x=r.data)==null?void 0:x.token};f(L)}}else l(!1),a(!0),i("Invalid mobile number or password")},I=async()=>{if(o==="false")return a(!0),i("Select a user type");l(!0),a(!1);let s=null;s=await C(n),console.log("otpres",s),s.error?(l(!1),a(!0),i("Enter a valid mobile number")):(l(!1),a(!1),h("/otp",{state:{mobileNumber:n,subdomain:m,registration:!1,userType:o}}))};return e.jsxs(e.Fragment,{children:[e.jsx(R,{}),e.jsxs("div",{className:"login",children:[e.jsx("div",{className:"login__header",children:`WELCOME TO ${(p=d==null?void 0:d.storeName)==null?void 0:p.toUpperCase()}`}),e.jsx("div",{className:"login__header_login",children:"SIGN IN"}),e.jsxs("div",{className:"login__container",children:[e.jsx("div",{className:"login__input_container",children:e.jsx(F,{value:n,onChange:j,className:"login__phone_input_field",defaultCountry:"in",placeholder:"Enter phone number"})}),e.jsx("div",{className:"login__input_container",children:e.jsx(B,{fullWidth:!0,children:e.jsxs(G,{id:"user-type",value:o,onChange:s=>y(s.target.value),children:[e.jsx(u,{value:"false",children:"Select User Role"}),e.jsx(u,{value:"Normal",children:"Standard User"}),e.jsx(u,{value:"Dealer",children:"Business Partner"})]})})}),_?e.jsx(e.Fragment,{}):e.jsx("div",{className:"login__input_container",children:e.jsx(D,{id:"outlined-password-input",label:"Password",type:"password",autoComplete:"current-password",value:c,onChange:s=>b(s.target.value),className:"login__input_field"})}),e.jsxs("div",{className:"login__With_otp_sec",children:[e.jsx("input",{type:"checkbox",onChange:s=>S(s.target.checked)})," Login With OTP"]}),e.jsx("div",{className:"login__btn_container",children:e.jsx("button",{className:"login__btn",onClick:E,disabled:g,children:g?e.jsx(H,{size:24}):"SIGN IN"})}),e.jsx("div",{className:"login__redirect_text_sec",children:e.jsxs("div",{className:"login__redirect_text",children:[e.jsx("span",{className:"login__redirect_txt",children:"Don't have an account ?"}),e.jsx(W,{to:"/register",className:"login__redirect_link",children:"SIGN UP"})]})}),N&&e.jsxs("div",{className:"login__error_sec",children:[e.jsx(O,{}),e.jsx("div",{className:"login__error_msg",children:v||"Login Error"})]})]})]})]})};export{Q as default};
